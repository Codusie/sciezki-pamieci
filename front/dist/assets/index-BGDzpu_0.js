import{q as S,s as g,a4 as j,a1 as I,a5 as _,a6 as N,I as w,a7 as V,a8 as P,a9 as oe,aa as Ne,u as W,a2 as te,ab as ae,ac as xe,ad as fe,ae as De,af as Ue,v as re,c as ne,i as z,w as U,n as Le,p as Ve,o as E,r as qe,e as J,ag as ye,ah as Ge,ai as Ze,a as Q,b as Se,G as Fe,H as He,m as We,F as Je,z as Ke}from"./index-DFLiazqL.js";import{L as Xe}from"./Layout-CkysFE0d.js";import{u as ve,a as Ye}from"./twardowski-MNAri1Y2.js";import{u as Qe,G as $e}from"./useLandmarks-zMcOt-tH.js";import"./index-DmprLPty.js";const be=(t,o)=>{for(const a of Object.keys(o))t.on(a,o[a])},Oe=t=>{for(const o of Object.keys(t)){const a=t[o];a&&M(a.cancel)&&a.cancel()}},et=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),M=t=>typeof t=="function",k=(t,o,a)=>{for(const e in a){const n="set"+et(e);t[n]?te(()=>a[e],(r,s)=>{t[n](r,s)}):o[n]&&te(()=>a[e],r=>{o[n](r)})}},O=(t,o,a={})=>{const e={...a};for(const n in t){const r=o[n],s=t[n];r&&(r&&r.custom===!0||s!==void 0&&(e[n]=s))}return e},q=t=>{const o={},a={};for(const e in t)if(e.startsWith("on")&&!e.startsWith("onUpdate")&&e!=="onReady"){const n=e.slice(2).toLocaleLowerCase();o[n]=t[e]}else a[e]=t[e];return{listeners:o,attrs:a}},tt=async t=>{const o=await Promise.all([_(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),_(()=>import("./marker-icon-C2eJqgqv.js"),[]),_(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},X=t=>{const o=g((...e)=>console.warn(`Method ${t} has been invoked without being replaced`)),a=(...e)=>o.value(...e);return a.wrapped=o,P(t,a),a},Y=(t,o)=>t.wrapped.value=o,C=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,L=t=>{const o=j(t);if(o===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return o},B=Symbol("useGlobalLeaflet"),G=Symbol("addLayer"),le=Symbol("removeLayer"),se=Symbol("registerControl"),ot=Symbol("registerLayerControl"),Ce=Symbol("canSetParentHtml"),Ae=Symbol("setParentHtml"),Te=Symbol("setIcon"),at=Symbol("bindPopup"),rt=Symbol("bindTooltip"),nt=Symbol("unbindPopup"),lt=Symbol("unbindTooltip"),K={options:{type:Object,default:()=>({}),custom:!0}},$=t=>({options:t.options,methods:{}}),Z={...K,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},ie=(t,o,a)=>{const e=L(G),n=L(le),{options:r,methods:s}=$(t),i=O(t,Z,r),l=()=>e({leafletObject:o.value}),u=()=>n({leafletObject:o.value}),d={...s,setAttribution(p){u(),o.value.options.attribution=p,t.visible&&l()},setName(){u(),t.visible&&l()},setLayerType(){u(),t.visible&&l()},setVisible(p){o.value&&(p?l():u())},bindPopup(p){if(!o.value||!M(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(p)},bindTooltip(p){if(!o.value||!M(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(p)},unbindTooltip(){o.value&&(M(o.value.closeTooltip)&&o.value.closeTooltip(),M(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(M(o.value.closePopup)&&o.value.closePopup(),M(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(p){a.emit("update:visible",p)}};return P(at,d.bindPopup),P(rt,d.bindTooltip),P(nt,d.unbindPopup),P(lt,d.unbindTooltip),ae(()=>{d.unbindPopup(),d.unbindTooltip(),u()}),{options:i,methods:d}},Re=(t,o)=>{if(t&&o.default)return V("div",{style:{display:"none"}},o.default())},Pe={...Z,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},st=(t,o,a)=>{const{options:e,methods:n}=ie(t,o,a);return{options:O(t,Pe,e),methods:n}},ue={...Pe,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},it=(t,o,a)=>{const{options:e,methods:n}=st(t,o,a),r=O(t,ue,e),s=L(le),i={...n,setStroke(l){o.value.setStyle({stroke:l})},setColor(l){o.value.setStyle({color:l})},setWeight(l){o.value.setStyle({weight:l})},setOpacity(l){o.value.setStyle({opacity:l})},setLineCap(l){o.value.setStyle({lineCap:l})},setLineJoin(l){o.value.setStyle({lineJoin:l})},setDashArray(l){o.value.setStyle({dashArray:l})},setDashOffset(l){o.value.setStyle({dashOffset:l})},setFill(l){o.value.setStyle({fill:l})},setFillColor(l){o.value.setStyle({fillColor:l})},setFillOpacity(l){o.value.setStyle({fillOpacity:l})},setFillRule(l){o.value.setStyle({fillRule:l})},setClassName(l){o.value.setStyle({className:l})}};return oe(()=>{s({leafletObject:o.value})}),{options:r,methods:i}},de={...ue,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},ut=(t,o,a)=>{const{options:e,methods:n}=it(t,o,a),r=O(t,de,e),s={...n,setRadius(i){o.value.setRadius(i)},setLatLng(i){o.value.setLatLng(i)}};return{options:r,methods:s}};({...de});const dt=S({name:"LCircleMarker",props:de,setup(t,o){const a=g(),e=g(!1),n=j(B),r=L(G),{options:s,methods:i}=ut(t,a,o);return I(async()=>{const{circleMarker:l}=n?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=N(l(t.latLng,s));const{listeners:u}=q(o.attrs);a.value.on(u),k(i,a.value,t),r({...t,...i,leafletObject:a.value}),e.value=!0,w(()=>o.emit("ready",a.value))}),{ready:e,leafletObject:a}},render(){return Re(this.ready,this.$slots)}}),F={...K,position:{type:String}},we=(t,o)=>{const{options:a,methods:e}=$(t),n=O(t,F,a),r={...e,setPosition(s){o.value&&o.value.setPosition(s)}};return ae(()=>{o.value&&o.value.remove()}),{options:n,methods:r}},ct=t=>t.default?V("div",{ref:"root"},t.default()):null,pt=S({name:"LControl",props:{...F,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,o){const a=g(),e=g(),n=j(B),r=L(se),{options:s,methods:i}=we(t,a);return I(async()=>{const{Control:l,DomEvent:u}=n?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]),d=l.extend({onAdd(){return e.value}});a.value=N(new d(s)),k(i,a.value,t),r({leafletObject:a.value}),t.disableClickPropagation&&e.value&&u.disableClickPropagation(e.value),t.disableScrollPropagation&&e.value&&u.disableScrollPropagation(e.value),w(()=>o.emit("ready",a.value))}),{root:e,leafletObject:a}},render(){return ct(this.$slots)}});({...F});({...F});({...F});const Me={...F,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},mt=(t,o)=>{const{options:a,methods:e}=we(t,o);return{options:O(t,Me,a),methods:e}},ft=S({name:"LControlZoom",props:Me,setup(t,o){const a=g(),e=j(B),n=L(se),{options:r,methods:s}=mt(t,a);return I(async()=>{const{control:i}=e?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=N(i.zoom(r)),k(s,a.value,t),n({leafletObject:a.value}),w(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),je={...Z};({...je});({...je});const ce={...Z,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Ie=(t,o,a)=>{const{options:e,methods:n}=ie(t,o,a),r=O(t,ce,e),s={...n,setTileComponent(){var i;(i=o.value)==null||i.redraw()}};return ae(()=>{o.value.off()}),{options:r,methods:s}},yt=(t,o,a,e)=>t.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),a.setOptions(this,n)},createTile(n){const r=this._tileCoordsToKey(n);this.tileComponents[r]=o.create("div");const s=V({setup:e,props:["coords"]},{coords:n});return xe(s,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(n){const r=this._tileCoordsToKey(n.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});S({props:{...ce,childRender:{type:Function,required:!0}},setup(t,o){const a=g(),e=g(null),n=g(!1),r=j(B),s=L(G),{options:i,methods:l}=Ie(t,a,o);return I(async()=>{const{GridLayer:u,DomUtil:d,Util:p}=r?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]),b=yt(u,d,p,t.childRender);a.value=N(new b(i));const{listeners:m}=q(o.attrs);a.value.on(m),k(l,a.value,t),s({...t,...l,leafletObject:a.value}),n.value=!0,w(()=>o.emit("ready",a.value))}),{root:e,ready:n,leafletObject:a}},render(){return this.ready?V("div",{style:{display:"none"},ref:"root"}):null}});const ge={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},vt=S({name:"LIcon",props:{...ge,...K},setup(t,o){const a=g(),e=j(B),n=L(Ce),r=L(Ae),s=L(Te);let i,l,u,d,p;const b=(T,y,v)=>{const h=T&&T.innerHTML;if(!y){v&&p&&n()&&r(h);return}const{listeners:D}=q(o.attrs);p&&l(p,D);const{options:ee}=$(t),R=O(t,ge,ee);h&&(R.html=h),p=R.html?u(R):d(R),i(p,D),s(p)},m=()=>{w(()=>b(a.value,!0,!1))},A=()=>{w(()=>b(a.value,!1,!0))},x={setIconUrl:m,setIconRetinaUrl:m,setIconSize:m,setIconAnchor:m,setPopupAnchor:m,setTooltipAnchor:m,setShadowUrl:m,setShadowRetinaUrl:m,setShadowAnchor:m,setBgPos:m,setClassName:m,setHtml:m};return I(async()=>{const{DomEvent:T,divIcon:y,icon:v}=e?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);i=T.on,l=T.off,u=y,d=v,k(x,{},t),new MutationObserver(A).observe(a.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),m()}),{root:a}},render(){const t=this.$slots.default?this.$slots.default():void 0;return V("div",{ref:"root"},t)}});({...Z});function ke(t,o,a){var e,n,r;o===void 0&&(o=50),a===void 0&&(a={});var s=(e=a.isImmediate)!=null&&e,i=(n=a.callback)!=null&&n,l=a.maxWait,u=Date.now(),d=[];function p(){if(l!==void 0){var m=Date.now()-u;if(m+o>=l)return l-m}return o}var b=function(){var m=[].slice.call(arguments),A=this;return new Promise(function(x,T){var y=s&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,u=Date.now(),!s){var h=t.apply(A,m);i&&i(h),d.forEach(function(D){return(0,D.resolve)(h)}),d=[]}},p()),y){var v=t.apply(A,m);return i&&i(v),x(v)}d.push({resolve:x,reject:T})})};return b.cancel=function(m){r!==void 0&&clearTimeout(r),d.forEach(function(A){return(0,A.reject)(m)}),d=[]},b}const he={...K,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},bt=S({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:he,setup(t,o){const a=g(),e=Ne({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=$(t),r=O(t,he,n),{listeners:s,attrs:i}=q(o.attrs),l=X(G),u=X(le),d=X(se),p=X(ot);P(B,t.useGlobalLeaflet);const b=W(()=>{const y={};return t.noBlockingAnimations&&(y.animate=!1),y}),m=W(()=>{const y=b.value;return t.padding&&(y.padding=t.padding),t.paddingTopLeft&&(y.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(y.paddingBottomRight=t.paddingBottomRight),y}),A={moveend:ke(y=>{e.leafletRef&&(o.emit("update:zoom",e.leafletRef.getZoom()),o.emit("update:center",e.leafletRef.getCenter()),o.emit("update:bounds",e.leafletRef.getBounds()))}),overlayadd(y){const v=e.layersInControl.find(h=>h.name===y.name);v&&v.updateVisibleProp(!0)},overlayremove(y){const v=e.layersInControl.find(h=>h.name===y.name);v&&v.updateVisibleProp(!1)}};I(async()=>{t.useGlobalLeaflet&&(C.L=C.L||await _(()=>import("./leaflet-src-CjPBq9Bq.js").then(c=>c.l),[]));const{map:y,CRS:v,Icon:h,latLngBounds:D,latLng:ee,stamp:R}=t.useGlobalLeaflet?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(c){console.error(`The following error occurred running the provided beforeMapMount hook ${c.message}`)}await tt(h);const Ee=typeof r.crs=="string"?v[r.crs]:r.crs;r.crs=Ee||v.EPSG3857;const H={addLayer(c){c.layerType!==void 0&&(e.layerControl===void 0?e.layersToAdd.push(c):e.layersInControl.find(f=>R(f.leafletObject)===R(c.leafletObject))||(e.layerControl.addLayer(c),e.layersInControl.push(c))),c.visible!==!1&&e.leafletRef.addLayer(c.leafletObject)},removeLayer(c){c.layerType!==void 0&&(e.layerControl===void 0?e.layersToAdd=e.layersToAdd.filter(f=>f.name!==c.name):(e.layerControl.removeLayer(c.leafletObject),e.layersInControl=e.layersInControl.filter(f=>R(f.leafletObject)!==R(c.leafletObject)))),e.leafletRef.removeLayer(c.leafletObject)},registerLayerControl(c){e.layerControl=c,e.layersToAdd.forEach(f=>{e.layerControl.addLayer(f)}),e.layersToAdd=[],d(c)},registerControl(c){e.leafletRef.addControl(c.leafletObject)},setZoom(c){const f=e.leafletRef.getZoom();c!==f&&e.leafletRef.setZoom(c,b.value)},setCrs(c){const f=e.leafletRef.getBounds();e.leafletRef.options.crs=c,e.leafletRef.fitBounds(f,{animate:!1,padding:[0,0]})},fitBounds(c){e.leafletRef.fitBounds(c,m.value)},setBounds(c){if(!c)return;const f=D(c);f.isValid()&&!(e.lastSetBounds||e.leafletRef.getBounds()).equals(f,0)&&(e.lastSetBounds=f,e.leafletRef.fitBounds(f))},setCenter(c){if(c==null)return;const f=ee(c),me=e.lastSetCenter||e.leafletRef.getCenter();(me.lat!==f.lat||me.lng!==f.lng)&&(e.lastSetCenter=f,e.leafletRef.panTo(f,b.value))}};Y(l,H.addLayer),Y(u,H.removeLayer),Y(d,H.registerControl),Y(p,H.registerLayerControl),e.leafletRef=N(y(a.value,r)),k(H,e.leafletRef,t),be(e.leafletRef,A),be(e.leafletRef,s),e.ready=!0,w(()=>o.emit("ready",e.leafletRef))}),oe(()=>{Oe(A),e.leafletRef&&(e.leafletRef.off(),e.leafletRef.remove())});const x=W(()=>e.leafletRef),T=W(()=>e.ready);return{root:a,ready:T,leafletObject:x,attrs:i}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),V("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),gt=["Symbol(Comment)","Symbol(Text)"],ht=["LTooltip","LPopup"],Be={...Z,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},_t=(t,o,a)=>{const{options:e,methods:n}=ie(t,o,a),r=O(t,Be,e),s={...n,setDraggable(i){o.value.dragging&&(i?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(i){a.emit("update:latLng",i.latlng),a.emit("update:lat-lng",i.latlng)},setLatLng(i){if(i!=null&&o.value){const l=o.value.getLatLng();(!l||!l.equals(i))&&o.value.setLatLng(i)}}};return{options:r,methods:s}},Lt=(t,o)=>{const a=o.slots.default&&o.slots.default();return a&&a.length&&a.some(St)};function St(t){return!(gt.includes(t.type.toString())||ht.includes(t.type.name))}const Ot=S({name:"LMarker",props:Be,setup(t,o){const a=g(),e=g(!1),n=j(B),r=L(G);P(Ce,()=>{var u;return!!((u=a.value)!=null&&u.getElement())}),P(Ae,u=>{var d,p;const b=M((d=a.value)==null?void 0:d.getElement)&&((p=a.value)==null?void 0:p.getElement());b&&(b.innerHTML=u)}),P(Te,u=>{var d;return((d=a.value)==null?void 0:d.setIcon)&&a.value.setIcon(u)});const{options:s,methods:i}=_t(t,a,o),l={moveHandler:ke(i.latLngSync)};return I(async()=>{const{marker:u,divIcon:d}=n?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);Lt(s,o)&&(s.icon=d({className:""})),a.value=N(u(t.latLng,s));const{listeners:p}=q(o.attrs);a.value.on(p),a.value.on("move",l.moveHandler),k(i,a.value,t),r({...t,...i,leafletObject:a.value}),e.value=!0,w(()=>o.emit("ready",a.value))}),oe(()=>Oe(l)),{ready:e,leafletObject:a}},render(){return Re(this.ready,this.$slots)}}),Ct={...ue,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},_e={...Ct},ze={...K,content:{type:String,default:null}};({...ze});({..._e,latLngs:{..._e.latLngs}});const pe={...ce,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},At=(t,o,a)=>{const{options:e,methods:n}=Ie(t,o,a),r=O(t,pe,e),s={...n};return{options:r,methods:s}},Tt=S({props:pe,setup(t,o){const a=g(),e=j(B),n=L(G),{options:r,methods:s}=At(t,a,o);return I(async()=>{const{tileLayer:i}=e?C.L:await _(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=N(i(t.url,r));const{listeners:l}=q(o.attrs);a.value.on(l),k(s,a.value,t),n({...t,...s,leafletObject:a.value}),w(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}});({...ze});({...pe});const Rt=S({__name:"Map",props:fe({center:{type:Array,required:!1,default:()=>[53.1235,18.0084]},rounded:{type:Boolean,required:!1,default:!1}},{zoom:{type:Number,default:12},zoomModifiers:{}}),emits:fe(["update:center"],["update:zoom"]),setup(t,{expose:o,emit:a}){o();const e=De(t,"zoom"),n=Ue("mapRef"),r=W(()=>e.value>=16?"50px":e.value>=14?"35px":e.value>=12?"25px":e.value>=10?"15px":"10px"),s=a,i=p=>{s("update:center",p)},l=ve(600),u=ve(200),d={zoom:e,mapRef:n,size:r,emit:s,centerUpdated:i,colorMain:l,colorLight:u,get LMap(){return bt},get LTileLayer(){return Tt},get LControlZoom(){return ft},get LControl(){return pt}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function Pt(t,o,a,e,n,r){return E(),ne("div",{style:Ve({"--marker-size":e.size,"--color-main":e.colorMain,"--color-light":e.colorLight})},[z(e.LMap,{ref:"mapRef","max-zoom":18,"min-zoom":2,zoom:e.zoom,"onUpdate:zoom":o[0]||(o[0]=s=>e.zoom=s),center:a.center,options:{zoomControl:!1},"use-global-leaflet":!1,"no-blocking-animations":!0,class:Le(["map",a.rounded?"map--rounded":""]),"onUpdate:center":e.centerUpdated},{default:U(()=>[z(e.LTileLayer,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),z(e.LControlZoom,{position:"topright"}),z(e.LControl,{position:"bottomright"},{default:U(()=>[...o[1]||(o[1]=[J("div",{class:"map__attribution"},[ye(" Â© "),J("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"nofollow noopener",class:"map__attribution-link"}," OpenStreetMap "),ye(" | "),J("a",{href:"https://leafletjs.com",target:"_blank",rel:"nofollow noopener",class:"map__attribution-link"}," Leaflet ")],-1)])]),_:1}),qe(t.$slots,"default")]),_:3},8,["zoom","center","class"])],4)}const wt=re(Rt,[["render",Pt],["__file","/usr/src/app/src/components/Map.vue"]]),Mt=S({__name:"MapMarker",props:{id:{type:Number,required:!0},latLng:{type:Array,required:!0},imageUrl:{type:String,required:!1}},setup(t,{expose:o}){o();const a=Ge(),n={router:a,onClick:()=>{a.push({name:"landmark-view",params:{landmarkId:t.id}})},get PrimeIcons(){return Ze},get LMarker(){return Ot},get LIcon(){return vt}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),jt=["src"];function It(t,o,a,e,n,r){return E(),Q(e.LMarker,{"lat-lng":a.latLng,onClick:e.onClick},{default:U(()=>[z(e.LIcon,null,{default:U(()=>[a.imageUrl?(E(),ne("img",{key:0,class:"marker-image",src:a.imageUrl,alt:"TODO"},null,8,jt)):Se("v-if",!0),J("i",{class:Le([e.PrimeIcons.MAP_MARKER,"marker-icon"])},null,2)]),_:1})]),_:1},8,["lat-lng"])}const kt=re(Mt,[["render",It],["__file","/usr/src/app/src/components/MapMarker.vue"]]),Bt=(t,o,a,e)=>{const r=t*Math.PI/180,s=a*Math.PI/180,i=(a-t)*Math.PI/180,l=(e-o)*Math.PI/180,u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r)*Math.cos(s)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},zt=S({__name:"index",setup(t,{expose:o}){o();const{data:a}=Qe(),{coords:e,locatedAt:n}=Ye({enableHighAccuracy:!0,immediate:!0}),{mutate:r}=Fe({mutationFn:async i=>{await He.POST("/visits",{body:{landmark_id:i}})}});te(e,i=>{if(!i)return;const l=a.value?.find(u=>Bt(i.latitude,i.longitude,Number(u.latitude),Number(u.longitude))<=50);l&&r(l.id)},{immediate:!0});const s={data:a,coords:e,locatedAt:n,markAsVisited:r,Layout:Xe,Map:wt,MapMarker:kt,GuideAvatar:$e,get LCircleMarker(){return dt}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),Et={class:"map-view"};function Nt(t,o,a,e,n,r){return E(),Q(e.Layout,null,{default:U(()=>[J("div",Et,[z(e.GuideAvatar,{class:"map-view__avatar"}),z(e.Map,We({class:"map-view__map"},e.locatedAt?{center:[e.coords.latitude,e.coords.longitude]}:void 0),{default:U(()=>[e.coords?(E(),Q(e.LCircleMarker,{key:0,"lat-lng":[e.coords.latitude,e.coords.longitude],radius:10},null,8,["lat-lng"])):Se("v-if",!0),(E(!0),ne(Je,null,Ke(e.data,s=>(E(),Q(e.MapMarker,{key:s.id,id:s.id,"lat-lng":[Number(s.latitude),Number(s.longitude)],"image-url":s.thumbnail_url},null,8,["id","lat-lng","image-url"]))),128))]),_:1},16)])]),_:1})}const Gt=re(zt,[["render",Nt],["__scopeId","data-v-d1d3d0d7"],["__file","/usr/src/app/src/pages/index.vue"]]);export{Gt as default};
