import{q as S,a0 as Ue,s as x,t as te,r as Ve,c as G,a as P,f as ne,e as Ce,p as ee,F as Oe,z as Ae,o as O,g as I,w as D,x as qe,G as g,a4 as B,a1 as z,a5 as h,a6 as U,J as j,a7 as Z,a8 as w,a9 as le,aa as Ge,a2 as re,ab as se,ac as Ze,ad as ve,ae as He,af as Fe,l as $e,v as be,ag as Je,ah as We,h as Q,H as Ke,I as Xe}from"./index-D5syhdGt.js";import{u as ge,a as Ye}from"./twardowski-BriEx0lT.js";import{u as Qe,G as et}from"./useLandmarks-20xho_0y.js";import"./index-D2a9GdSe.js";import"./useQuery-B_uZAPGL.js";const tt=S({__name:"Layout",setup(t,{expose:o}){o();const a=Ue(),e=x(()=>a.path==="/"),n=x(()=>a.path.match(/^\/\d+$/)),l={route:a,isMap:e,isChatMode:n,items:[{label:"Mapa",route:"/",icon:"pi pi-map"},{label:"Historia",route:"/history",icon:"pi pi-history"},{label:"Ranking",route:"/teams",icon:"pi pi-users"}]};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ot={class:"layout"},at={key:0,class:"mobile-nav"},rt={class:"icon-container"},nt={class:"nav-label"};function lt(t,o,a,e,n,r){const l=Ve("router-link");return O(),G("div",ot,[P("div",{class:ee(["content",{"content--no-padding":e.isMap,"content--chat":e.isChatMode}])},[Ce(t.$slots,"default",{},void 0,!0)],2),e.isChatMode?ne("v-if",!0):(O(),G("nav",at,[(O(),G(Oe,null,Ae(e.items,i=>I(l,{key:i.route,to:i.route,class:"nav-item","active-class":"nav-item--active"},{default:D(()=>[P("div",rt,[P("i",{class:ee([i.icon,"nav-icon"])},null,2)]),P("span",nt,qe(i.label),1)]),_:2},1032,["to"])),64))]))])}const st=te(tt,[["render",lt],["__scopeId","data-v-fcebc900"],["__file","/usr/src/app/src/components/Layout.vue"]]),_e=(t,o)=>{for(const a of Object.keys(o))t.on(a,o[a])},Te=t=>{for(const o of Object.keys(t)){const a=t[o];a&&k(a.cancel)&&a.cancel()}},it=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),k=t=>typeof t=="function",E=(t,o,a)=>{for(const e in a){const n="set"+it(e);t[n]?re(()=>a[e],(r,l)=>{t[n](r,l)}):o[n]&&re(()=>a[e],r=>{o[n](r)})}},C=(t,o,a={})=>{const e={...a};for(const n in t){const r=o[n],l=t[n];r&&(r&&r.custom===!0||l!==void 0&&(e[n]=l))}return e},H=t=>{const o={},a={};for(const e in t)if(e.startsWith("on")&&!e.startsWith("onUpdate")&&e!=="onReady"){const n=e.slice(2).toLocaleLowerCase();o[n]=t[e]}else a[e]=t[e];return{listeners:o,attrs:a}},ut=async t=>{const o=await Promise.all([h(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),h(()=>import("./marker-icon-C2eJqgqv.js"),[]),h(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},X=t=>{const o=g((...e)=>console.warn(`Method ${t} has been invoked without being replaced`)),a=(...e)=>o.value(...e);return a.wrapped=o,w(t,a),a},Y=(t,o)=>t.wrapped.value=o,A=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,L=t=>{const o=B(t);if(o===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return o},N=Symbol("useGlobalLeaflet"),F=Symbol("addLayer"),ie=Symbol("removeLayer"),ue=Symbol("registerControl"),dt=Symbol("registerLayerControl"),Re=Symbol("canSetParentHtml"),Me=Symbol("setParentHtml"),Pe=Symbol("setIcon"),ct=Symbol("bindPopup"),pt=Symbol("bindTooltip"),mt=Symbol("unbindPopup"),ft=Symbol("unbindTooltip"),K={options:{type:Object,default:()=>({}),custom:!0}},oe=t=>({options:t.options,methods:{}}),$={...K,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},de=(t,o,a)=>{const e=L(F),n=L(ie),{options:r,methods:l}=oe(t),i=C(t,$,r),s=()=>e({leafletObject:o.value}),u=()=>n({leafletObject:o.value}),d={...l,setAttribution(p){u(),o.value.options.attribution=p,t.visible&&s()},setName(){u(),t.visible&&s()},setLayerType(){u(),t.visible&&s()},setVisible(p){o.value&&(p?s():u())},bindPopup(p){if(!o.value||!k(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(p)},bindTooltip(p){if(!o.value||!k(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(p)},unbindTooltip(){o.value&&(k(o.value.closeTooltip)&&o.value.closeTooltip(),k(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(k(o.value.closePopup)&&o.value.closePopup(),k(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(p){a.emit("update:visible",p)}};return w(ct,d.bindPopup),w(pt,d.bindTooltip),w(mt,d.unbindPopup),w(ft,d.unbindTooltip),se(()=>{d.unbindPopup(),d.unbindTooltip(),u()}),{options:i,methods:d}},we=(t,o)=>{if(t&&o.default)return Z("div",{style:{display:"none"}},o.default())},je={...$,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},yt=(t,o,a)=>{const{options:e,methods:n}=de(t,o,a);return{options:C(t,je,e),methods:n}},ce={...je,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},vt=(t,o,a)=>{const{options:e,methods:n}=yt(t,o,a),r=C(t,ce,e),l=L(ie),i={...n,setStroke(s){o.value.setStyle({stroke:s})},setColor(s){o.value.setStyle({color:s})},setWeight(s){o.value.setStyle({weight:s})},setOpacity(s){o.value.setStyle({opacity:s})},setLineCap(s){o.value.setStyle({lineCap:s})},setLineJoin(s){o.value.setStyle({lineJoin:s})},setDashArray(s){o.value.setStyle({dashArray:s})},setDashOffset(s){o.value.setStyle({dashOffset:s})},setFill(s){o.value.setStyle({fill:s})},setFillColor(s){o.value.setStyle({fillColor:s})},setFillOpacity(s){o.value.setStyle({fillOpacity:s})},setFillRule(s){o.value.setStyle({fillRule:s})},setClassName(s){o.value.setStyle({className:s})}};return le(()=>{l({leafletObject:o.value})}),{options:r,methods:i}},pe={...ce,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},bt=(t,o,a)=>{const{options:e,methods:n}=vt(t,o,a),r=C(t,pe,e),l={...n,setRadius(i){o.value.setRadius(i)},setLatLng(i){o.value.setLatLng(i)}};return{options:r,methods:l}};({...pe});const gt=S({name:"LCircleMarker",props:pe,setup(t,o){const a=g(),e=g(!1),n=B(N),r=L(F),{options:l,methods:i}=bt(t,a,o);return z(async()=>{const{circleMarker:s}=n?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=U(s(t.latLng,l));const{listeners:u}=H(o.attrs);a.value.on(u),E(i,a.value,t),r({...t,...i,leafletObject:a.value}),e.value=!0,j(()=>o.emit("ready",a.value))}),{ready:e,leafletObject:a}},render(){return we(this.ready,this.$slots)}}),J={...K,position:{type:String}},ke=(t,o)=>{const{options:a,methods:e}=oe(t),n=C(t,J,a),r={...e,setPosition(l){o.value&&o.value.setPosition(l)}};return se(()=>{o.value&&o.value.remove()}),{options:n,methods:r}},_t=t=>t.default?Z("div",{ref:"root"},t.default()):null,ht=S({name:"LControl",props:{...J,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,o){const a=g(),e=g(),n=B(N),r=L(ue),{options:l,methods:i}=ke(t,a);return z(async()=>{const{Control:s,DomEvent:u}=n?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]),d=s.extend({onAdd(){return e.value}});a.value=U(new d(l)),E(i,a.value,t),r({leafletObject:a.value}),t.disableClickPropagation&&e.value&&u.disableClickPropagation(e.value),t.disableScrollPropagation&&e.value&&u.disableScrollPropagation(e.value),j(()=>o.emit("ready",a.value))}),{root:e,leafletObject:a}},render(){return _t(this.$slots)}});({...J});({...J});({...J});const Ie={...J,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Lt=(t,o)=>{const{options:a,methods:e}=ke(t,o);return{options:C(t,Ie,a),methods:e}},St=S({name:"LControlZoom",props:Ie,setup(t,o){const a=g(),e=B(N),n=L(ue),{options:r,methods:l}=Lt(t,a);return z(async()=>{const{control:i}=e?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=U(i.zoom(r)),E(l,a.value,t),n({leafletObject:a.value}),j(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),Be={...$};({...Be});({...Be});const me={...$,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},ze=(t,o,a)=>{const{options:e,methods:n}=de(t,o,a),r=C(t,me,e),l={...n,setTileComponent(){var i;(i=o.value)==null||i.redraw()}};return se(()=>{o.value.off()}),{options:r,methods:l}},Ct=(t,o,a,e)=>t.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),a.setOptions(this,n)},createTile(n){const r=this._tileCoordsToKey(n);this.tileComponents[r]=o.create("div");const l=Z({setup:e,props:["coords"]},{coords:n});return Ze(l,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(n){const r=this._tileCoordsToKey(n.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});S({props:{...me,childRender:{type:Function,required:!0}},setup(t,o){const a=g(),e=g(null),n=g(!1),r=B(N),l=L(F),{options:i,methods:s}=ze(t,a,o);return z(async()=>{const{GridLayer:u,DomUtil:d,Util:p}=r?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]),b=Ct(u,d,p,t.childRender);a.value=U(new b(i));const{listeners:m}=H(o.attrs);a.value.on(m),E(s,a.value,t),l({...t,...s,leafletObject:a.value}),n.value=!0,j(()=>o.emit("ready",a.value))}),{root:e,ready:n,leafletObject:a}},render(){return this.ready?Z("div",{style:{display:"none"},ref:"root"}):null}});const he={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Ot=S({name:"LIcon",props:{...he,...K},setup(t,o){const a=g(),e=B(N),n=L(Re),r=L(Me),l=L(Pe);let i,s,u,d,p;const b=(R,y,v)=>{const _=R&&R.innerHTML;if(!y){v&&p&&n()&&r(_);return}const{listeners:q}=H(o.attrs);p&&s(p,q);const{options:ae}=oe(t),M=C(t,he,ae);_&&(M.html=_),p=M.html?u(M):d(M),i(p,q),l(p)},m=()=>{j(()=>b(a.value,!0,!1))},T=()=>{j(()=>b(a.value,!1,!0))},V={setIconUrl:m,setIconRetinaUrl:m,setIconSize:m,setIconAnchor:m,setPopupAnchor:m,setTooltipAnchor:m,setShadowUrl:m,setShadowRetinaUrl:m,setShadowAnchor:m,setBgPos:m,setClassName:m,setHtml:m};return z(async()=>{const{DomEvent:R,divIcon:y,icon:v}=e?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);i=R.on,s=R.off,u=y,d=v,E(V,{},t),new MutationObserver(T).observe(a.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),m()}),{root:a}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Z("div",{ref:"root"},t)}});({...$});function Ee(t,o,a){var e,n,r;o===void 0&&(o=50),a===void 0&&(a={});var l=(e=a.isImmediate)!=null&&e,i=(n=a.callback)!=null&&n,s=a.maxWait,u=Date.now(),d=[];function p(){if(s!==void 0){var m=Date.now()-u;if(m+o>=s)return s-m}return o}var b=function(){var m=[].slice.call(arguments),T=this;return new Promise(function(V,R){var y=l&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,u=Date.now(),!l){var _=t.apply(T,m);i&&i(_),d.forEach(function(q){return(0,q.resolve)(_)}),d=[]}},p()),y){var v=t.apply(T,m);return i&&i(v),V(v)}d.push({resolve:V,reject:R})})};return b.cancel=function(m){r!==void 0&&clearTimeout(r),d.forEach(function(T){return(0,T.reject)(m)}),d=[]},b}const Le={...K,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},At=S({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Le,setup(t,o){const a=g(),e=Ge({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=oe(t),r=C(t,Le,n),{listeners:l,attrs:i}=H(o.attrs),s=X(F),u=X(ie),d=X(ue),p=X(dt);w(N,t.useGlobalLeaflet);const b=x(()=>{const y={};return t.noBlockingAnimations&&(y.animate=!1),y}),m=x(()=>{const y=b.value;return t.padding&&(y.padding=t.padding),t.paddingTopLeft&&(y.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(y.paddingBottomRight=t.paddingBottomRight),y}),T={moveend:Ee(y=>{e.leafletRef&&(o.emit("update:zoom",e.leafletRef.getZoom()),o.emit("update:center",e.leafletRef.getCenter()),o.emit("update:bounds",e.leafletRef.getBounds()))}),overlayadd(y){const v=e.layersInControl.find(_=>_.name===y.name);v&&v.updateVisibleProp(!0)},overlayremove(y){const v=e.layersInControl.find(_=>_.name===y.name);v&&v.updateVisibleProp(!1)}};z(async()=>{t.useGlobalLeaflet&&(A.L=A.L||await h(()=>import("./leaflet-src-CjPBq9Bq.js").then(c=>c.l),[]));const{map:y,CRS:v,Icon:_,latLngBounds:q,latLng:ae,stamp:M}=t.useGlobalLeaflet?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(c){console.error(`The following error occurred running the provided beforeMapMount hook ${c.message}`)}await ut(_);const De=typeof r.crs=="string"?v[r.crs]:r.crs;r.crs=De||v.EPSG3857;const W={addLayer(c){c.layerType!==void 0&&(e.layerControl===void 0?e.layersToAdd.push(c):e.layersInControl.find(f=>M(f.leafletObject)===M(c.leafletObject))||(e.layerControl.addLayer(c),e.layersInControl.push(c))),c.visible!==!1&&e.leafletRef.addLayer(c.leafletObject)},removeLayer(c){c.layerType!==void 0&&(e.layerControl===void 0?e.layersToAdd=e.layersToAdd.filter(f=>f.name!==c.name):(e.layerControl.removeLayer(c.leafletObject),e.layersInControl=e.layersInControl.filter(f=>M(f.leafletObject)!==M(c.leafletObject)))),e.leafletRef.removeLayer(c.leafletObject)},registerLayerControl(c){e.layerControl=c,e.layersToAdd.forEach(f=>{e.layerControl.addLayer(f)}),e.layersToAdd=[],d(c)},registerControl(c){e.leafletRef.addControl(c.leafletObject)},setZoom(c){const f=e.leafletRef.getZoom();c!==f&&e.leafletRef.setZoom(c,b.value)},setCrs(c){const f=e.leafletRef.getBounds();e.leafletRef.options.crs=c,e.leafletRef.fitBounds(f,{animate:!1,padding:[0,0]})},fitBounds(c){e.leafletRef.fitBounds(c,m.value)},setBounds(c){if(!c)return;const f=q(c);f.isValid()&&!(e.lastSetBounds||e.leafletRef.getBounds()).equals(f,0)&&(e.lastSetBounds=f,e.leafletRef.fitBounds(f))},setCenter(c){if(c==null)return;const f=ae(c),ye=e.lastSetCenter||e.leafletRef.getCenter();(ye.lat!==f.lat||ye.lng!==f.lng)&&(e.lastSetCenter=f,e.leafletRef.panTo(f,b.value))}};Y(s,W.addLayer),Y(u,W.removeLayer),Y(d,W.registerControl),Y(p,W.registerLayerControl),e.leafletRef=U(y(a.value,r)),E(W,e.leafletRef,t),_e(e.leafletRef,T),_e(e.leafletRef,l),e.ready=!0,j(()=>o.emit("ready",e.leafletRef))}),le(()=>{Te(T),e.leafletRef&&(e.leafletRef.off(),e.leafletRef.remove())});const V=x(()=>e.leafletRef),R=x(()=>e.ready);return{root:a,ready:R,leafletObject:V,attrs:i}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Z("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Tt=["Symbol(Comment)","Symbol(Text)"],Rt=["LTooltip","LPopup"],Ne={...$,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Mt=(t,o,a)=>{const{options:e,methods:n}=de(t,o,a),r=C(t,Ne,e),l={...n,setDraggable(i){o.value.dragging&&(i?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(i){a.emit("update:latLng",i.latlng),a.emit("update:lat-lng",i.latlng)},setLatLng(i){if(i!=null&&o.value){const s=o.value.getLatLng();(!s||!s.equals(i))&&o.value.setLatLng(i)}}};return{options:r,methods:l}},Pt=(t,o)=>{const a=o.slots.default&&o.slots.default();return a&&a.length&&a.some(wt)};function wt(t){return!(Tt.includes(t.type.toString())||Rt.includes(t.type.name))}const jt=S({name:"LMarker",props:Ne,setup(t,o){const a=g(),e=g(!1),n=B(N),r=L(F);w(Re,()=>{var u;return!!((u=a.value)!=null&&u.getElement())}),w(Me,u=>{var d,p;const b=k((d=a.value)==null?void 0:d.getElement)&&((p=a.value)==null?void 0:p.getElement());b&&(b.innerHTML=u)}),w(Pe,u=>{var d;return((d=a.value)==null?void 0:d.setIcon)&&a.value.setIcon(u)});const{options:l,methods:i}=Mt(t,a,o),s={moveHandler:Ee(i.latLngSync)};return z(async()=>{const{marker:u,divIcon:d}=n?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);Pt(l,o)&&(l.icon=d({className:""})),a.value=U(u(t.latLng,l));const{listeners:p}=H(o.attrs);a.value.on(p),a.value.on("move",s.moveHandler),E(i,a.value,t),r({...t,...i,leafletObject:a.value}),e.value=!0,j(()=>o.emit("ready",a.value))}),le(()=>Te(s)),{ready:e,leafletObject:a}},render(){return we(this.ready,this.$slots)}}),kt={...ce,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Se={...kt},xe={...K,content:{type:String,default:null}};({...xe});({...Se,latLngs:{...Se.latLngs}});const fe={...me,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},It=(t,o,a)=>{const{options:e,methods:n}=ze(t,o,a),r=C(t,fe,e),l={...n};return{options:r,methods:l}},Bt=S({props:fe,setup(t,o){const a=g(),e=B(N),n=L(F),{options:r,methods:l}=It(t,a,o);return z(async()=>{const{tileLayer:i}=e?A.L:await h(()=>import("./leaflet-src.esm-C210bVOb.js"),[]);a.value=U(i(t.url,r));const{listeners:s}=H(o.attrs);a.value.on(s),E(l,a.value,t),n({...t,...l,leafletObject:a.value}),j(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}});({...xe});({...fe});const zt=S({__name:"Map",props:ve({center:{type:Array,required:!1,default:()=>[53.1235,18.0084]},rounded:{type:Boolean,required:!1,default:!1}},{zoom:{type:Number,default:12},zoomModifiers:{}}),emits:ve(["update:center"],["update:zoom"]),setup(t,{expose:o,emit:a}){o();const e=He(t,"zoom"),n=Fe("mapRef"),r=x(()=>e.value>=16?"50px":e.value>=14?"35px":e.value>=12?"25px":e.value>=10?"15px":"10px"),l=a,i=p=>{l("update:center",p)},s=ge(600),u=ge(200),d={zoom:e,mapRef:n,size:r,emit:l,centerUpdated:i,colorMain:s,colorLight:u,get LMap(){return At},get LTileLayer(){return Bt},get LControlZoom(){return St},get LControl(){return ht}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function Et(t,o,a,e,n,r){return O(),G("div",{style:$e({"--marker-size":e.size,"--color-main":e.colorMain,"--color-light":e.colorLight})},[I(e.LMap,{ref:"mapRef","max-zoom":18,"min-zoom":10,"max-bounds":[[52.94,17.7],[53.31,18.31]],zoom:e.zoom,"onUpdate:zoom":o[0]||(o[0]=l=>e.zoom=l),center:a.center,options:{zoomControl:!1},"use-global-leaflet":!1,"no-blocking-animations":!0,class:ee(["map",a.rounded?"map--rounded":""]),"onUpdate:center":e.centerUpdated},{default:D(()=>[I(e.LTileLayer,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),I(e.LControlZoom,{position:"topright"}),I(e.LControl,{position:"bottomright"},{default:D(()=>[...o[1]||(o[1]=[P("div",{class:"map__attribution"},[be(" Â© "),P("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"nofollow noopener",class:"map__attribution-link"}," OpenStreetMap "),be(" | "),P("a",{href:"https://leafletjs.com",target:"_blank",rel:"nofollow noopener",class:"map__attribution-link"}," Leaflet ")],-1)])]),_:1}),Ce(t.$slots,"default")]),_:3},8,["zoom","center","class"])],4)}const Nt=te(zt,[["render",Et],["__file","/usr/src/app/src/components/Map.vue"]]),xt=S({__name:"MapMarker",props:{id:{type:Number,required:!0},latLng:{type:Array,required:!0},imageUrl:{type:String,required:!1}},setup(t,{expose:o}){o();const a=Je(),n={router:a,onClick:()=>{a.push({name:"landmark-view",params:{landmarkId:t.id}})},get PrimeIcons(){return We},get LMarker(){return jt},get LIcon(){return Ot}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),Dt=["src"];function Ut(t,o,a,e,n,r){return O(),Q(e.LMarker,{"lat-lng":a.latLng,onClick:e.onClick},{default:D(()=>[I(e.LIcon,null,{default:D(()=>[a.imageUrl?(O(),G("img",{key:0,class:"marker-image",src:a.imageUrl,alt:"TODO"},null,8,Dt)):ne("v-if",!0),P("i",{class:ee([e.PrimeIcons.MAP_MARKER,"marker-icon"])},null,2)]),_:1})]),_:1},8,["lat-lng"])}const Vt=te(xt,[["render",Ut],["__file","/usr/src/app/src/components/MapMarker.vue"]]),qt=(t,o,a,e)=>{const r=t*Math.PI/180,l=a*Math.PI/180,i=(a-t)*Math.PI/180,s=(e-o)*Math.PI/180,u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r)*Math.cos(l)*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},Gt=S({__name:"index",setup(t,{expose:o}){o();const{data:a}=Qe(),{coords:e,locatedAt:n}=Ye({enableHighAccuracy:!0,immediate:!0}),{mutate:r}=Ke({mutationFn:async i=>{await Xe.POST("/visits",{body:{landmark_id:i}})}});re(e,i=>{if(!i)return;const s=a.value?.find(u=>qt(i.latitude,i.longitude,Number(u.latitude),Number(u.longitude))<=50);s&&r(s.id)},{immediate:!0});const l={data:a,coords:e,locatedAt:n,markAsVisited:r,Layout:st,Map:Nt,MapMarker:Vt,GuideAvatar:et,get LCircleMarker(){return gt}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Zt={class:"map-view"};function Ht(t,o,a,e,n,r){return O(),Q(e.Layout,null,{default:D(()=>[P("div",Zt,[I(e.GuideAvatar,{class:"map-view__avatar",style:{"z-index":"9900"}}),I(e.Map,{class:"map-view__map"},{default:D(()=>[e.coords?(O(),Q(e.LCircleMarker,{key:0,"lat-lng":[e.coords.latitude,e.coords.longitude],radius:10},null,8,["lat-lng"])):ne("v-if",!0),(O(!0),G(Oe,null,Ae(e.data,l=>(O(),Q(e.MapMarker,{key:l.id,id:l.id,"lat-lng":[Number(l.latitude),Number(l.longitude)],"image-url":l.thumbnail_url},null,8,["id","lat-lng","image-url"]))),128))]),_:1})])]),_:1})}const Xt=te(Gt,[["render",Ht],["__scopeId","data-v-d1d3d0d7"],["__file","/usr/src/app/src/pages/index.vue"]]);export{Xt as default};
